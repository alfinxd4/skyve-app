<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <!-- cdn library jquery -->
   <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
   <!-- stylesheet css -->
   <link rel="stylesheet" href="css/app.css">
   <!-- cdn font awesome -->
   <script src="https://kit.fontawesome.com/c8105c8ce4.js" crossorigin="anonymous"></script>
   <!-- library flowbite.css-->
   <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
   <style>
      .bg-gradient-custom {
         background: linear-gradient(to right, #38a169, #d69e2e, #dd6b20, #ff0000, #c53030, #9b59b6, #8e44ad);
         /* Hijau ke kuning, oranye, merah, merah tua, ungu muda, ungu tua */
      }

      .bg-uv-custom {
         background: linear-gradient(to right, #38a169, #d69e2e, #ff0000, #c53030, #9b59b6);
         /* Hijau ke kuning, merah, merah tua, ungu muda */
      }
   </style>
</head>

<body class="h-full m-0 overflow-hidden relative">
   <!-- canvas background -->
   <div class="canvas-outer -z-10 absolute top-0 left-0 w-100 h-100">
      <canvas id="canvas" class="canvas"></canvas>
   </div>
   <!-- refresh-element -->
   <div class="absolute top-44 right-20">
      <i id="icon-refresh" class="fa-solid fa-arrows-rotate fa-spin text-xl text-white cursor-pointer"></i>
   </div>
   <!-- main content -->
   <main class="flex flex-col min-h-screen z-40">
      <div class="flex-grow max-w-sm pt-5 mx-auto text-center">
         <div class="font-semibold text-slate-100">
            <!-- city-name -->
            <p class="text-lg">
               <span id="city-name"></span>,
               <span id="country-code"></span>
               <i class="fa-solid fa-location-arrow ms-1"></i>
            </p>
            <!-- local-time -->
            <p id="local-time"></p>
         </div>

         <!-- current-weather-icon -->
         <div class="flex justify-center items-center mt-5">
            <div class="mx-auto text-center">
               <img id="icon-current-weather" alt="weather_icon" class="w-40 h-auto max-w-sm ">
            </div>
         </div>

         <!-- waather-info -->
         <div>
            <!-- current-weather -->
            <p id="current-weather" class="text-xl text-slate-100 font-semibold"></p>

            <div class="mt-5 text-white ">
               <div class="flex items-center justify-center space-x-12 ">
                  <!-- current windspeed -->
                  <div class="">
                     <div class="flex items-center space-x-2">
                        <i class="fa-solid fa-wind"></i>
                        <p class="text-sm font-bold">Wind</p>
                     </div>
                     <p id="current-windspeed" class="text-2xl font-semibold mt-2"></p>
                  </div>
                  <!-- current temp -->
                  <div class="">
                     <div class="flex items-center space-x-2">
                        <i class="fa-solid fa-temperature-three-quarters"></i>
                        <p class="text-sm font-bold">Temp</p>
                     </div>
                     <p id="current-temp" class="text-2xl font-semibold mt-2"></p>
                  </div>
                  <!-- current humidity -->
                  <div class="">
                     <div class="flex items-center space-x-2">
                        <i class="fa-solid fa-droplet"></i>
                        <p class="text-sm font-bold">Humidity</p>
                     </div>
                     <p id="current-humi" class="text-2xl font-semibold mt-2"></p>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </main>

   <!-- drawer-component -->
   <div id="drawer-swipe" class="fixed z-40 w-full border-t border-gray-200  rounded-t-[1.6rem]
      transition-all duration-700 ease-in-out h-[285px] bottom-0 
       left-0 right-0 overflow-y-auto  background-drawer bg-opacity-20 backdrop-blur-md " tabindex="-1">
      <div class="border-b h-14 border-2 border-white border-opacity-20 ">

         <div class="py-2 drawer-toggle cursor-pointer" id="drawer-toggle">
            <span
               class="absolute w-12 h-1 -translate-x-1/2 bg-slate-800 rounded-lg top-3 left-1/2 cursor-pointer"></span>
         </div>
         <div class="flex items-center justify-between text-white mb-3 text-xs px-5 relative top-1.5">
            <p id="hourly-page" class="cursor-pointer py-2">Hourly Forecast</p>
            <p id="daily-page" class="cursor-pointer py-2">Daily Forecast</p>
         </div>
      </div>
      <!-- content that is visible when the drawer is collapsed -->
      <div id="drawer-initial-content">
         <div id="hourly-forecast"
            class="grid grid-flow-col auto-cols-max overflow-x-scroll scrollbar-hide pt-7 gap-2 px-5">

         </div>

         <div id="daily-forecast"
            class="grid grid-flow-col auto-cols-max overflow-x-scroll scrollbar-hide pt-7 gap-2 px-5"></div>

      </div>

      <!-- content that will be revealed upon expanding -->
      <div id="drawer-expanded-content" class="hidden my-8 px-8">
         <!-- aqi  -->
         <div class="text-white bg-[#48319D]/50 p-5 rounded-xl shadow-lg border-2 border-[#48319D] cursor-pointer">
            <!--  -->
            <div class="flex items-center space-x-2 mb-5">
               <i class="fa-solid fa-wind"></i>
               <p>Air Quality</p>
            </div>
            <!--  -->
            <div class="flex items-center space-x-1 mb-3">
               <p class="text-3xl">104</p>
               <p>
                  <span> - </span>
                  <span class="text-xl">Unhealty</span>
               </p>
            </div>
            <div class="relative w-full h-4 rounded-full bg-gradient-custom mb-5">
               <div id="aqi-toggle"
                  class="absolute h-6 w-6 bg-white border-4 border-white rounded-full transform -translate-y-1/2 top-1/2 transition-all duration-200">
               </div>
            </div>
            <div class="flex items-center justify-between  cursor-pointer">
               <p>See more</p>
               <i class="fa-solid fa-chevron-right"></i>
            </div>

         </div>

         <div class="flex items-center space-x-5 mt-5">
            <!-- UV Index -->
            <div class="text-white bg-[#48319D]/50 p-5 rounded-xl shadow-lg border-2 border-[#48319D] h-64 w-full cursor-pointer">
                <div class="flex items-center space-x-2 mb-5">
                    <i class="fa-solid fa-sun"></i>
                    <p>UV Index</p>
                </div>
                <div class="space-x-1 mb-3">
                    <p class="text-3xl">11+</p>
                    <p class="text-xl">Extreme</p>
                </div>
                <div class="relative w-full h-4 rounded-full mb-5 bg-uv-custom">
                    <div id="uv-toggle"
                        class="absolute h-6 w-6 bg-white border-4 border-white rounded-full transform -translate-y-1/2 top-1/2 transition-all duration-200">
                    </div>
                </div>
            </div>
        
            <!-- Sunrise -->
            <div class="text-white bg-[#48319D]/50 p-5 rounded-xl shadow-lg border-2 border-[#48319D] h-64 w-full cursor-pointer">
                <div class="flex items-center space-x-2 mb-5">
                    <i class="fa-solid fa-cloud-sun"></i>
                    <p>Sunrise/Sunset</p>
                </div>
                <div>
                  <div class="flex items-center justify-between">
                     <div>
                        <p class="">05:23</p>
                        <p>AM</p>
                     </div>
                     <div>
                        <p class="">07:23</p>
                        <p>PM</p>
                     </div>
                  </div>
                   
                  <div class="relative w-full h-32">
                     <svg class="absolute w-full" viewBox="0 0 100 50">
                         <defs>
                             <linearGradient id="sunrise-sunset" x1="0%" y1="0%" x2="100%" y2="100%">
                                 <stop offset="0%" style="stop-color:#FFB74D; stop-opacity:1" /> <!-- Warna kuning -->
                                 <stop offset="50%" style="stop-color:#FF7043; stop-opacity:1" /> <!-- Warna oranye -->
                                 <stop offset="100%" style="stop-color:#D50000; stop-opacity:1" /> <!-- Warna merah -->
                             </linearGradient>
                         </defs>
                         <!-- Garis setengah lingkaran dengan satu puncak -->
                         <path d="M 0 40 Q 50 -33, 100 40" stroke="url(#sunrise-sunset)" stroke-width="4" fill="none" />
                     </svg>
                 </div>
                 

                    <div class="text-center relative -top-16 ">
                     <p>Sunshine Duration</p>
                     <p class="text-2xl">12h 08m</p>
                    </div>
                </div>
            </div>
        </div>


        
        <div class="flex items-center space-x-5 mt-5">
          <!-- feels-like -->
          <div class="text-white bg-[#48319D]/50 p-5 rounded-xl shadow-lg border-2 border-[#48319D] h-52 w-full cursor-pointer">
            <div class="flex items-center space-x-2 mb-5">
              <i class="fa-solid fa-temperature-full"></i>
                <p>Feels Like</p>
            </div>
            <div>
              <p class="text-3xl">19&deg; </p>
              <p class="mt-5">Similar to the actual temperature</p>
            </div>   
        </div>

         <!-- Visibility -->
         <div class="text-white bg-[#48319D]/50 p-5 rounded-xl shadow-lg border-2 border-[#48319D] h-52 w-full cursor-pointer">
             <div class="flex items-center space-x-2 mb-5">
               <i class="fa-solid fa-umbrella"></i>
                 <p>Visibilty</p>
             </div>
             <div class="space-x-1 mb-3">
                 <p class="text-3xl">1.8 mm</p>
                 <p class="text-xl">in last hour</p>
             </div>
         </div>
     
        
     </div>
        
         <!-- menu -->
         <div id="menu" class="flex items-center justify-around text-white text-lg fixed bottom-3 w-full z-40">
            <!-- map-menu -->
            <a href="index.html">
               <i class="fa-solid fa-map-pin shadow-xl cursor-pointer"></i>
            </a>
            <!-- map-add -->
            <a class="relative -top-3">
               <div id="btn-add-weather" class="size-12 rounded-full flex items-center justify-center shadow-xl">
                  <i class="fa-solid fa-plus text-[#48319D] font-bold text-xl cursor-pointer"></i>
               </div>
            </a>
            <!-- map-list -->
            <a>
               <i class="fa-solid fa-list shadow-xl cursor-pointer"></i>
            </a>
         </div>

         <!-- flowbite.js -->
         <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
         <script>
            function setAQIPosition(aqi) {
               const aqiToggle = document.getElementById('aqi-toggle');

               // Hitung posisi toggle berdasarkan rentang AQI
               let position = 0;
               let toggleColor = ''; // Variabel untuk menyimpan warna toggle

               if (aqi >= 0 && aqi <= 12) {
                  position = (aqi / 12) * 100 * (1 / 7);  // 0-12 hijau
                  toggleColor = '#38a169'; // Warna hijau
               } else if (aqi > 12 && aqi <= 35.5) {
                  position = ((aqi - 12) / (35.5 - 12)) * 100 * (1 / 7) + (100 * (1 / 7));  // 12-35.5 kuning
                  toggleColor = '#d69e2e'; // Warna kuning
               } else if (aqi > 35.5 && aqi <= 55.5) {
                  position = ((aqi - 35.5) / (55.5 - 35.5)) * 100 * (1 / 7) + (100 * (2 / 7));  // 35.5-55.5 oranye
                  toggleColor = '#dd6b20'; // Warna oranye
               } else if (aqi > 55.5 && aqi <= 150.5) {
                  position = ((aqi - 55.5) / (150.5 - 55.5)) * 100 * (1 / 7) + (100 * (3 / 7));  // 55.5-150.5 merah muda
                  toggleColor = '#ff0000'; // Warna merah muda
               } else if (aqi > 150.5 && aqi <= 250.5) {
                  position = ((aqi - 150.5) / (250.5 - 150.5)) * 100 * (1 / 7) + (100 * (4 / 7));  // 150.5-250.5 merah tua
                  toggleColor = '#c53030'; // Warna merah tua
               } else if (aqi > 250.5 && aqi <= 350.5) {
                  position = ((aqi - 250.5) / (350.5 - 250.5)) * 100 * (1 / 7) + (100 * (5 / 7));  // 250.5-350.5 ungu muda
                  toggleColor = '#9b59b6'; // Warna ungu muda
               } else if (aqi > 350.5 && aqi <= 500.5) {
                  position = ((aqi - 350.5) / (500.5 - 350.5)) * 100 * (1 / 7) + (100 * (6 / 7));  // 350.5-500.5 ungu tua
                  toggleColor = '#8e44ad'; // Warna ungu tua
               }

               // Pindahkan toggle ke posisi yang sesuai
               aqiToggle.style.left = `calc(${position}% - 16px)`; // Offset -16px agar lingkaran tetap di tengah

               // Ubah warna toggle sesuai dengan rentang AQI
               aqiToggle.style.backgroundColor = toggleColor;
            }

            // Contoh penggunaan dengan nilai AQI yang ingin ditentukan
            setAQIPosition(120); // Misalnya kita set AQI ke 120

            function setUVPosition(uv) {
               const uvToggle = document.getElementById('uv-toggle');

               // Hitung posisi toggle berdasarkan rentang UV Index
               let position = 0;
               let toggleColor = ''; // Variabel untuk menyimpan warna toggle

               if (uv >= 0 && uv <= 2) {
                  position = (uv / 2) * 25; // 0-2, 25% untuk posisi max 2
                  toggleColor = '#38a169'; // Hijau
               } else if (uv > 2 && uv <= 5) {
                  position = 25 + ((uv - 2) / (5 - 2)) * 25; // 2-5, 25% - 50%
                  toggleColor = '#d69e2e'; // Kuning
               } else if (uv > 5 && uv <= 7) {
                  position = 50 + ((uv - 5) / (7 - 5)) * 20; // 5-7, 50% - 70%
                  toggleColor = '#ff0000'; // Merah
               } else if (uv > 7 && uv <= 10) {
                  position = 70 + ((uv - 7) / (10 - 7)) * 20; // 7-10, 70% - 90%
                  toggleColor = '#c53030'; // Merah tua
               } else if (uv > 10) {
                  position = 90; // 10+, 90%
                  toggleColor = '#9b59b6'; // Ungu muda
               }

               // Pindahkan toggle ke posisi yang sesuai
               uvToggle.style.left = `calc(${position}% - 16px)`; // Offset -16px agar lingkaran tetap di tengah

               // Ubah warna toggle sesuai dengan rentang UV
               uvToggle.style.backgroundColor = toggleColor;

            }

            // Contoh penggunaan dengan nilai UV yang ingin ditentukan
            setUVPosition(11); // Misalnya kita set UV ke 6
            const ctx = document.getElementById('sunriseSunsetChart').getContext('2d');

            // Data waktu sunrise dan sunset hari ini
            const sunriseTime = '05:28';
            const sunsetTime = '19:25';

            // Menghitung waktu dalam jam
            const sunriseHour = parseInt(sunriseTime.split(':')[0]) + parseInt(sunriseTime.split(':')[1]) / 60;
            const sunsetHour = parseInt(sunsetTime.split(':')[0]) + parseInt(sunsetTime.split(':')[1]) / 60;

            const data = {
               labels: [''],
               datasets: [
                  {
                     label: 'Sunrise',
                     data: [sunriseHour],
                     borderColor: 'rgba(56, 189, 83, 1)', // Hijau
                     borderWidth: 5,
                     fill: false,
                     pointRadius: 0, // Tidak ada titik
                     tension: 0, // Garis lurus
                  },
                  {
                     label: 'Sunset',
                     data: [sunsetHour],
                     borderColor: 'rgba(234, 88, 12, 1)', // Merah
                     borderWidth: 5,
                     fill: false,
                     pointRadius: 0, // Tidak ada titik
                     tension: 0, // Garis lurus
                  }
               ]
            };

            const sunriseSunsetChart = new Chart(ctx, {
               type: 'line',
               data: data,
               options: {
                  scales: {
                     y: {
                        title: {
                           display: true,
                           text: 'Waktu (Jam)',
                        },
                        min: 5, // Set minimum waktu
                        max: 21, // Set maksimum waktu
                        ticks: {
                           stepSize: 1, // Interval waktu
                           callback: function (value) {
                              const hours = Math.floor(value);
                              const minutes = Math.round((value - hours) * 60);
                              return `${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
                           }
                        }
                     },
                     x: {
                        display: false // Sembunyikan sumbu x
                     }
                  }
               }
            });


         </script>
<script defer src="js/main.bundle.js"></script></body>

</html>