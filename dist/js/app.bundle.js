(()=>{"use strict";const t=$("#local-time"),e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=$("#city-name"),r=$("#country-name"),n=$("#temp"),a=$("#humidity"),i=$("#weather"),s=$("#min-temp"),l=$("#max-temp"),h=$("#day1"),m=$("#day2"),c=$("#day3"),u=$("#day4"),d=$("#day5"),p=$("#day6"),x=$("#day7"),g=[$("#hour1"),$("#hour2"),$("#hour3"),$("#hour4"),$("#hour5"),$("#hour6"),$("#hour7"),$("#hour8"),$("#hour9"),$("#hour10"),$("#hour11"),$("#hour12")],f=()=>{const e=new Date;let o=e.getHours(),r=e.getMinutes(),n=e.getSeconds();o=o<10?"0"+o:o,r=r<10?"0"+r:r,n=n<10?"0"+n:n;let a=o+":"+r+":"+n;t.text(a),setTimeout(f,1e3)};f();const y="https://api.openweathermap.org/data/2.5",C="d12f1c70ff84d00a509bf50060d7af7c";$(window).on("load",(()=>{((t,f)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((t=>{((t,f)=>{fetch(`https://api.opencagedata.com/geocode/v1/json?q=${t}%2C${f}&key=250178f6b314472c95280f5f73d608e1`).then((t=>t.json())).then((t=>{var n;n=t,o.text(n.results[0].components.city||n.results[0].components.county),r.text(n.results[0].components.country),(()=>{let t=(new Date).getDay();for(let o=1;o<=7;o++){let r=(t+o-1)%7;$(`#d${o}`).text(e[r])}})()})).catch((t=>{console.error("Error:",t)})),fetch(`${y}/weather?lat=${t}&lon=${f}&appid=${C}&units=metric`).then((t=>t.json())).then((t=>{var e;e=t,i.text(e.weather[0].main),n.text(e.main.temp+"°C"),a.text(e.main.humidity+"%")})).catch((t=>{console.error("Error:",t)})),fetch(`${y}/forecast/daily?lat=${t}&lon=${f}&cnt=7&appid=${C}&units=metric`).then((t=>t.json())).then((t=>{var e;e=t,s.text(Math.round(e.list[0].temp.max)+"°C"),l.text(Math.round(e.list[0].temp.min)+"°C"),h.text(Math.round(e.list[0].temp.max)+"°C/"+Math.round(e.list[0].temp.min)+"°C,"+e.list[0].weather[0].main),m.text(Math.round(e.list[1].temp.max)+"°C/"+Math.round(e.list[1].temp.min)+"°C,"+e.list[1].weather[0].main),c.text(Math.round(e.list[2].temp.max)+"°C/"+Math.round(e.list[2].temp.min)+"°C,"+e.list[2].weather[0].main),u.text(Math.round(e.list[3].temp.max)+"°C/"+Math.round(e.list[3].temp.min)+"°C,"+e.list[3].weather[0].main),d.text(Math.round(e.list[4].temp.max)+"°C/"+Math.round(e.list[4].temp.min)+"°C,"+e.list[4].weather[0].main),p.text(Math.round(e.list[5].temp.max)+"°C/"+Math.round(e.list[5].temp.min)+"°C,"+e.list[5].weather[0].main),x.text(Math.round(e.list[6].temp.max)+"°C/"+Math.round(e.list[6].temp.min)+"°C,"+e.list[6].weather[0].main)})).catch((t=>{console.error("Error:",t)})),fetch(`https://pro.openweathermap.org/data/2.5/forecast/hourly?lat=${t}&lon=${f}&appid=${C}&units=metric`).then((t=>t.json())).then((t=>{console.log(t),(t=>{const e=t,o=new Date,r=o.getHours(),n=((t,e,o)=>{const r=Math.min(o+12,24);return t.list.filter((t=>{const[n,a]=t.dt_txt.split(" "),[i]=a.split(":");return n===e&&i>=o&&i<r}))})(e,o.toISOString().slice(0,10),r);console.log(n),n.forEach(((t,e)=>{if(g[e]){const o=t.dt_txt.split(" ")[1].split(":")[0];g[e].text(`Jam: ${o}, Suhu: ${t.main.temp}°C`),g[e].show()}}));for(let t=n.length;t<g.length;t++)g[t].hide()})(t)})).catch((t=>{console.error("Error:",t)}))})(t.coords.latitude,t.coords.longitude)}),(t=>{console.error("Error:",t.message),f&&f(t.message)}));else{const t="Geolocation is not supported by this browser.";console.error("Error:",t),f&&f(t)}})(0,(t=>{alert("Unable to retrieve your location. Please ensure location services are enabled."),console.error("Geolocation error:",t)}))}))})();