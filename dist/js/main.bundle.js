(()=>{var e={295:(e,t,s)=>{var i={"./background/morn.webp":30,"./background/night.webp":648,"./background/noon.webp":296,"./background/starry-mountain.webp":497,"./house.webp":755,"./weather/clear/morn-clear.webp":562,"./weather/clear/night-clear.webp":804,"./weather/cloudly/evening-cloudly.webp":282,"./weather/cloudly/morn-cloudly.webp":696,"./weather/cloudly/night-cloudly.webp":384,"./weather/drizzle/evening-drizzle.webp":210,"./weather/drizzle/morn-drizzle.webp":423,"./weather/drizzle/night-drizzle.webp":932,"./weather/fog/fog.webp":627,"./weather/icon/cloud.webp":891,"./weather/icon/lighting.webp":218,"./weather/icon/rain.webp":788,"./weather/icon/snow.webp":125,"./weather/icon/star1.webp":153,"./weather/icon/star2.webp":764,"./weather/icon/sun.webp":616,"./weather/overcast/overcast.webp":907,"./weather/rain/evening-rain.webp":810,"./weather/rain/morn-rain.webp":44,"./weather/rain/night-rain.webp":356,"./weather/snow/evening-snow.webp":496,"./weather/snow/morn-snow.webp":852,"./weather/snow/night-snow.webp":658,"./weather/thunderstorm/evening-storm.webp":868,"./weather/thunderstorm/morn-storm.webp":568,"./weather/thunderstorm/night-storm.webp":974};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id=295},30:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/morn.webp"},648:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/night.webp"},296:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/noon.webp"},497:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/starry-mountain.webp"},755:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/house.webp"},562:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/clear/morn-clear.webp"},804:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/clear/night-clear.webp"},282:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/evening-cloudly.webp"},696:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/morn-cloudly.webp"},384:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/night-cloudly.webp"},210:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/evening-drizzle.webp"},423:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/morn-drizzle.webp"},932:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/night-drizzle.webp"},627:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/fog/fog.webp"},891:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/cloud.webp"},218:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/lighting.webp"},788:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/rain.webp"},125:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/snow.webp"},153:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/star1.webp"},764:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/star2.webp"},616:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/sun.webp"},907:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/overcast/overcast.webp"},810:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/evening-rain.webp"},44:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/morn-rain.webp"},356:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/night-rain.webp"},496:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/evening-snow.webp"},852:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/morn-snow.webp"},658:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/night-snow.webp"},868:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/evening-storm.webp"},568:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/morn-storm.webp"},974:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/night-storm.webp"}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{"use strict";const e=s(295);e.keys().map((t=>e(t)));const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i={btnRefresh:$("#icon-refresh"),cityName:$("#city-name"),countryCode:$("#country-code"),currentTemp:$("#current-temp"),currentHumi:$("#current-humi"),currentWeather:$("#current-weather"),currentWindSpeed:$("#current-windspeed"),iconCurrentWeather:$("#icon-current-weather"),localTime:$("#local-time"),hourlyForecast:$("#hourly-forecast"),dailyForecast:$("#daily-forecast"),drawer:$("#drawer-swipe"),expandedContent:$("#drawer-expanded-content"),menu:$("#menu")},r=e=>{let t="Unknown",s="";return 0===e||1===e?t="Clear":2===e?t="Cloudy":3===e?t="Overcast":45===e||48===e?t="Fog":e>=51&&e<=55?t="Drizzle":e>=61&&e<=65||e>=80&&e<=82?t="Rain":e>=71&&e<=75||e>=85&&e<=86?t="Snow":e>=95&&e<=99&&(t="Thunderstorm"),"Clear"===t?s="assets/images/weather/clear/night-clear.webp":"Cloudy"===t?s="assets/images/weather/cloudly/night-cloudly.webp":"Overcast"===t?s="assets/images/weather/overcast/overcast.webp":"Fog"===t?s="assets/images/weather/fog/fog.webp":"Drizzle"===t?s="assets/images/weather/cloudly/night-drizzle.webp":"Rain"===t?s="assets/images/weather/rain/night-rain.webp":"Snow"===t?s="assets/images/weather/snow/night-snow.webp":"Thunderstorm"===t&&(s="assets/images/weather/thunderstorm/night-storm.webp"),{weather:t,iconSrc:s}},n=()=>{const e=new Date,s=e.getDate(),r=e.getDay(),o=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),h=`${t[r]} ${s} <span> | </span> ${o} <span class="colon">:</span> ${a}`;i.localTime.html(h),$(".colon").toggleClass("blink",e.getSeconds()%2==0),setTimeout(n,1e3)},o=e=>{i.cityName.text(e.results[0].components.city||e.results[0].components.county),i.countryCode.text(e.results[0].components.country_code.toUpperCase())};let a;const h=e=>{switch(a=r(e.current.weather_code),m.clouds=!1,m.lightning=!1,m.rain=!1,m.snow=!1,m.wind=!1,e.current.weather_code){case 0:m.clouds=!1,m.lightning=!1,m.rain=!1,m.snow=!1,m.wind=!1;case 1:m.clouds=!1,m.lightning=!1,m.rain=!1,m.snow=!1,m.wind=!1;break;case 2:case 3:m.clouds=!0,m.lightning=!1,m.rain=!1,m.snow=!1,m.wind=!1;break;case 45:case 48:m.rain=!1,m.clouds=!0,m.lightning=!1,m.snow=!1,m.wind=!0;break;case 51:case 53:case 55:m.rain=!0,m.clouds=!0,m.lightning=!1,m.snow=!1,m.wind=!1;break;case 61:case 63:case 65:m.rain=!0,m.clouds=!0,m.lightning=!0,m.snow=!1,m.wind=!1;break;case 71:case 73:case 75:m.rain=!1,m.clouds=!1,m.lightning=!1,m.snow=!0,m.wind=!1;break;case 95:case 96:case 99:m.rain=!0,m.clouds=!0,m.lightning=!0,m.snow=!0,m.wind=!1}i.currentWeather.text(a.weather),i.currentTemp.text(Math.round(e.current.temperature_2m)+"°"),i.currentHumi.text(e.current.relative_humidity_2m+"%"),i.currentWindSpeed.text(e.current.wind_speed_10m+"m/s"),i.iconCurrentWeather.attr("src",a.iconSrc)};$(window).on("load",(()=>{$("#daily-forecast").addClass("hidden"),((e,s)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((e=>((e,s)=>{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${s}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FBangkok`;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}%2C${s}&key=250178f6b314472c95280f5f73d608e1`).then((e=>e.json())).then(o).catch(console.error),fetch(n).then((e=>e.json())).then((e=>{h(e),(e=>{const t=new Date,s=t.getHours(),n=i.hourlyForecast.empty();e.hourly.time.map(((t,s)=>({time:t,temperature:e.hourly.temperature_2m[s],weatherCode:e.hourly.weather_code[s]}))).filter((({time:e})=>{const i=new Date(e),r=i.getHours();return i.toDateString()===t.toDateString()&&r>=s&&r<s+12})).forEach((({time:e,temperature:t,weatherCode:s})=>{const i=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o=r(s).iconSrc;n.append(`\n      <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n        <img src="${o}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n        <div class="text-xs text-white relative -top-5">\n          <p class="font-bold mt-2">${i}</p>\n          <p class="my-2">${Math.round(t)}&deg;</p>\n        </div>\n      </div>\n    `)}))})(e),(e=>{const s=i.dailyForecast.empty(),n=(new Date).getDay();e.daily.time.forEach(((i,o)=>{const a=(n+o)%7,h=Math.round(e.daily.temperature_2m_max[o])+"°",c=Math.round(e.daily.temperature_2m_min[o])+"°",l=e.daily.weather_code[o],w=r(l).iconSrc;s.append(`\n      <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n        <img src="${w}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n        <div class="text-xs text-white relative -top-3">\n          <p class="font-bold">${t[a]}</p>\n          <p class="underline underline-offset-4">${h}</p>\n          <p>${c}</p>\n        </div>\n      </div>\n    `)}))})(e)})).catch(console.error)})(e.coords.latitude,e.coords.longitude)),(e=>{console.error("Error:",e.message),s&&s(e.message)}));else{const e="Geolocation is not supported by this browser.";console.error("Error:",e),s&&s(e)}})(0,(e=>{alert("Unable to retrieve your location. Please ensure location services are enabled."),console.error("Geolocation error:",e)}))})),i.btnRefresh.on("click",(()=>{location.reload()})),$("#drawer-toggle").on("click",(()=>{i.drawer.toggleClass("drawer-collapsed drawer-expanded"),i.expandedContent.toggleClass("hidden"),i.menu.toggleClass("hidden")})),$("#hourly-page").on("click",(()=>{i.dailyForecast.addClass("hidden"),i.hourlyForecast.removeClass("hidden")})),$("#daily-page").on("click",(()=>{i.hourlyForecast.addClass("hidden"),i.dailyForecast.removeClass("hidden")})),n();let c=!1,l=[],w=!1,d=!1,p={},u=!1,g={leaf:{fileName:"weather_leaf.png"},cloud_02:{fileName:"weather_cloud_02.png",width:1792,height:276}},m={clouds:!1,lightning:!1,rain:!1,snow:!1,wind:!1};h({current:{weather_code:45,temperature_2m:30,relative_humidity_2m:65,wind_speed_10m:5}});let y=!1;const b="rgba(255, 255, 255, .4)",x=function(e,t,s=!0){const i=Math.random()*(t-e)+e;return s?Math.floor(i):i},f=function(){d.clearRect(0,0,w.width,w.height);for(let e=0,t=l.length;e<t;e++)l[e].draw()||(l.splice(e,1),t--,e--);c=window.requestAnimationFrame(f)},v=function(e){this.type="cloud",this.img=e.img||g.cloud_02,this.width=this.img.width,this.height=this.img.height,this.xVelocity=(30-x(0,10))/60,this.x=e.x||x(-100,w.width+100),this.y=e.y||x(0-this.height/2,-60)};v.prototype.draw=function(){return this.x+=this.xVelocity,d.drawImage(this.img.image,this.x,this.y,this.img.width,this.img.height),this.x>w.width&&(this.xVelocity=(30-x(0,10))/60,this.x=0-this.width),this.x<0-this.width&&(this.xVelocity=(30-x(0,10))/60,this.x=w.width),!0};const _=function(){this.type="rain_drop",this.width=3,this.height=x(15,25),this.x=x(0,w.width),this.y=-10,this.yVelocity=8};_.prototype.draw=function(){if(this.y+=this.yVelocity,d.fillStyle=b,d.fillRect(this.x,this.y,this.width,this.height),this.y>w.height){if(Math.floor(10*Math.random())>7)for(const e=0,t=x(3,5);e<t;e++)l.push(new z(this.x));return!1}return!0};const z=function(e){this.type="splash_drop",this.width=3,this.height=3,this.x=e,this.y=w.height,this.yVelocity=x(-1,-3,!1),this.xVelocity=x(-2,2,!1),this.age=0,this.maxAge=30};z.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,d.fillStyle=b,d.fillRect(this.x,this.y,this.width,this.height),this.yVelocity+=.1,this.age++,!(this.age>this.maxAge)};const C=function(){this.type="snow_flake",this.width=x(10,30),this.height=this.width,this.x=x(-200,w.width+200),this.y=-30,this.xVelocity=(30-x(0,10))/60,this.yVelocity=x(.8,1.4,!1),this.opacity=x(.3,.7,!1),this.settleLength=500,this.settled=0};C.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,d.beginPath(),d.arc(this.x,this.y,this.width/2,0,2*Math.PI,!1),d.fillStyle="rgba(255, 255, 255, "+this.opacity+")",d.fill(),!(this.y>w.height&&(this.xVelocity=0,this.yVelocity=0,this.settled++,this.settled>this.settleLength))};const k=function(){this.type="blowing_leaf",this.width=x(10,20),this.height=2.24*this.width,this.xVelocity=(30-x(0,20))/6,this.yVelocity=this.xVelocity/6,this.rotation=1*Math.random(),this.rotationVelocity=x(-.06,.06,!1),this.x=this.xVelocity>0?x(-50,-100):x(w.width,w.width+100),this.gravity=x(-.06,.06,!1),this.y=x(w.height-w.height/4,w.height),this.yDirectionChangeLength=x(20,100),this.yDirectionTravelled=0};k.prototype.draw=function(){return d.save(),this.x+=this.xVelocity,this.y+=this.yVelocity,this.yVelocity+=this.gravity-.01,this.yDirectionTravelled++,this.yDirectionTravelled>this.yDirectionChangeLength&&(this.yDirectionTravelled=0,this.yVelocity=x(-1,1,!1)),d.translate(this.x,this.y),d.rotate(this.rotation),d.drawImage(g.leaf.image,-this.width/2,-this.height/2,this.width,this.height),d.restore(),!(this.x>w.width+50||this.x<-50||this.y>w.height)};const S=function(){this.type="lightning",this.x=x(0,w.width),this.y=-20,this.height=x(50,100),this.width=3};let V;function D(){const e=(new Date).getHours();V=e>=4&&e<6?"sunrise":e>=7&&e<15?"day":e>=16&&e<19?"sunset":"night",w&&(w.className=V)}S.prototype.draw=function(){return d.fillStyle="rgba(255, 255, 255, .8)",d.fillRect(this.x,this.y,this.width,this.height),this.y<w.height+this.height&&(this.y+=2)},D(),console.log(V);const T=function(){w.width=window.innerWidth,w.height=window.innerHeight};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementsByTagName("input");w=document.getElementById("canvas"),d=w.getContext("2d"),T(),D(),window.addEventListener("resize",T);for(const t=0;t<e.length;t++)"text"===e[t].type?e[t].addEventListener("keyup",updateConditions):e[t].addEventListener("change",updateConditions);!function(e){let t=0,s=0;if(u)return void(e&&e());const i=function(){s++,s===t&&(u=!0,e&&e())};for(const e in g){const s=g[e];t++,s.image=new Image,s.image.onload=i,s.image.src="https://s3.amazonaws.com/gerwins/weather/"+s.fileName}}((function(){(function(){cancelAnimationFrame(c),c=!1;for(let e in p)p[e]&&clearInterval(p[e])})(),y=!1,l=[],c||(m.clouds&&!y&&(l.push(new v({x:-400}),new v({x:700}),new v({x:1400})),y=!0),m.rain&&(p.rain=setInterval((()=>l.push(new _)),60)),m.snow&&(p.snow=setInterval((()=>l.push(new C)),250)),m.wind&&function e(){for(let e=0,t=x(0,3);e<t;e++)l.push(new k);p.wind=setTimeout(e,x(500,1500))}(),m.lightning&&function e(){x(0,10)>7&&(p.secondFlash=setTimeout((()=>l.push(new S)),200)),l.push(new S),p.lightning=setTimeout(e,x(500,7e3))}(),f())}))}))})()})();
//# sourceMappingURL=main.bundle.js.map