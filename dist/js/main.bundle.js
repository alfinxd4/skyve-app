(()=>{var e={295:(e,t,s)=>{var i={"./background/morn.webp":30,"./background/night.webp":648,"./background/noon.webp":296,"./background/starry-mountain.webp":497,"./house.webp":755,"./weather/clear/morn-clear.webp":562,"./weather/clear/night-clear.webp":804,"./weather/cloudly/evening-cloudly.webp":282,"./weather/cloudly/morn-cloudly.webp":696,"./weather/cloudly/night-cloudly.webp":384,"./weather/drizzle/evening-drizzle.webp":210,"./weather/drizzle/morn-drizzle.webp":423,"./weather/drizzle/night-drizzle.webp":932,"./weather/fog/fog.webp":627,"./weather/icon/cloud.webp":891,"./weather/icon/lighting.webp":218,"./weather/icon/rain.webp":788,"./weather/icon/snow.webp":125,"./weather/icon/star1.webp":153,"./weather/icon/star2.webp":764,"./weather/icon/sun.webp":616,"./weather/overcast/overcast.webp":907,"./weather/rain/evening-rain.webp":810,"./weather/rain/morn-rain.webp":44,"./weather/rain/night-rain.webp":356,"./weather/snow/evening-snow.webp":496,"./weather/snow/morn-snow.webp":852,"./weather/snow/night-snow.webp":658,"./weather/thunderstorm/evening-storm.webp":868,"./weather/thunderstorm/morn-storm.webp":568,"./weather/thunderstorm/night-storm.webp":974};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id=295},30:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/morn.webp"},648:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/night.webp"},296:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/noon.webp"},497:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/background/starry-mountain.webp"},755:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/house.webp"},562:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/clear/morn-clear.webp"},804:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/clear/night-clear.webp"},282:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/evening-cloudly.webp"},696:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/morn-cloudly.webp"},384:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/cloudly/night-cloudly.webp"},210:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/evening-drizzle.webp"},423:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/morn-drizzle.webp"},932:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/drizzle/night-drizzle.webp"},627:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/fog/fog.webp"},891:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/cloud.webp"},218:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/lighting.webp"},788:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/rain.webp"},125:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/snow.webp"},153:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/star1.webp"},764:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/star2.webp"},616:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/icon/sun.webp"},907:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/overcast/overcast.webp"},810:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/evening-rain.webp"},44:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/morn-rain.webp"},356:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/rain/night-rain.webp"},496:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/evening-snow.webp"},852:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/morn-snow.webp"},658:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/snow/night-snow.webp"},868:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/evening-storm.webp"},568:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/morn-storm.webp"},974:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/weather/thunderstorm/night-storm.webp"}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})();var i={};(()=>{"use strict";s.d(i,{BP:()=>S,Tp:()=>F});const e=e=>{F.cityName.text(e.results[0].components.city||e.results[0].components.county),F.countryCode.text(e.results[0].components.country_code.toUpperCase())};let t={clouds:!1,lightning:!1,rain:!1,snow:!1,wind:!1};const r=e=>{let t,s,i=T;switch(0===e||1===e?t="Clear":2===e?t="Cloudy":3===e?t="Overcast":45===e||48===e?t="Fog":e>=51&&e<=55?t="Drizzle":e>=61&&e<=65||e>=80&&e<=82?t="Rain":e>=71&&e<=75||e>=85&&e<=86?t="Snow":e>=95&&e<=99&&(t="Thunderstorm"),t){case"Clear":"sunrise"==i||"day"==i||"sunset"==i?s="assets/images/weather/clear/morn-clear.webp":"night"==i&&(s="assets/images/weather/clear/night-clear.webp");break;case"Cloudy":"sunrise"==i||"day"==i?s="assets/images/weather/cloudly/morn-cloudly.webp":"sunset"==i?s="assets/images/weather/cloudly/evening-cloudly.webp":"night"==i&&(s="assets/images/weather/cloudly/night-cloudly.webp");break;case"Overcast":("sunrise"==i||"day"==i||"sunset"==i||"night"==i)&&(s="assets/images/weather/overcast/overcast.webp");break;case"Fog":("sunrise"==i||"day"==i||"sunset"==i||"night"==i)&&(s="assets/images/weather/fog/fog.webp");break;case"Drizzle":"sunrise"==i||"day"==i?s="assets/images/weather/drizzle/morn-drizzle.webp":"sunset"==i?s="assets/images/weather/drizzle/evening-drizzle.webp":"night"==i&&(s="assets/images/weather/drizzle/night-drizzle.webp");break;case"Rain":"sunrise"==i||"day"==i?s="assets/images/weather/rain/morn-rain.webp":"sunset"==i?s="assets/images/weather/rain/evening-rain.webp":"night"==i&&(s="assets/images/weather/rain/night-rain.webp");break;case"Snow":"sunrise"==i||"day"==i?s="assets/images/weather/snow/morn-snow.webp":"sunset"==i?s="assets/images/weather/snow/evening-snow.webp":"night"==i&&(s="assets/images/weather/snow/night-snow.webp");break;case"Thunderstorm":"sunrise"==i||"day"==i?s="assets/images/weather/thunderstorm/morn-storm.webp":"sunset"==i?s="assets/images/weather/thunderstorm/evening-storm.webp":"night"==i&&(s="assets/images/weather/thunderstorm/night-storm.webp")}return{weather:t,iconSrc:s}};let n=!1,o=[],a=!1,h=!1,c={},l=!1,w={leaf:{fileName:"weather_leaf.png"},cloud_02:{fileName:"weather_cloud_02.png",width:1792,height:276}},d=!1;const p="rgba(255, 255, 255, .4)",g=function(e,t,s=!0){const i=Math.random()*(t-e)+e;return s?Math.floor(i):i},u=()=>{y(),d=!1;for(let e=0,t=o.length;e<t;e++)o.splice(e,1),t--,e--;m()},m=()=>{if(!n){if(t.clouds&&!d&&(o.push(new f({x:-400}),new f({x:700}),new f({x:1400})),d=!0),t.rain&&(c.rain=setInterval((()=>o.push(new x)),60)),t.snow&&(c.snow=setInterval((()=>o.push(new _)),250)),t.wind){let e=function(){for(let e=0,t=g(0,3);e<t;e++)o.push(new z);c.wind=setTimeout(e,g(500,1500))};e()}if(t.lightning){let e=function(){g(0,10)>7&&(c.secondFlash=setTimeout((function(){o.push(new C)}),200)),o.push(new C),c.lightning=setTimeout(e,g(500,7e3))};e()}b()}},y=()=>{cancelAnimationFrame(n),n=!1;for(let e in c)c[e]&&clearInterval(c[e])},b=()=>{h.clearRect(0,0,a.width,a.height);for(let e=0,t=o.length;e<t;e++)o[e].draw()||(o.splice(e,1),t--,e--);n=window.requestAnimationFrame(b)},f=function(e){this.type="cloud",this.img=e.img||w.cloud_02,this.width=this.img.width,this.height=this.img.height,this.xVelocity=(30-g(0,10))/60,this.x=e.x||g(-100,a.width+100),this.y=e.y||g(0-this.height/2,-60)};f.prototype.draw=function(){return this.x+=this.xVelocity,h.drawImage(this.img.image,this.x,this.y,this.img.width,this.img.height),this.x>a.width&&(this.xVelocity=(30-g(0,10))/60,this.x=0-this.width),this.x<0-this.width&&(this.xVelocity=(30-g(0,10))/60,this.x=a.width),!0};const x=function(){this.type="rain_drop",this.width=3,this.height=g(15,25),this.x=g(0,a.width),this.y=-10,this.yVelocity=8};x.prototype.draw=function(){if(this.y+=this.yVelocity,h.fillStyle=p,h.fillRect(this.x,this.y,this.width,this.height),this.y>a.height){if(Math.floor(10*Math.random())>7)for(let e=0,t=g(3,5);e<t;e++)o.push(new v(this.x));return!1}return!0};const v=function(e){this.type="splash_drop",this.width=3,this.height=3,this.x=e,this.y=a.height,this.yVelocity=g(-1,-3,!1),this.xVelocity=g(-2,2,!1),this.age=0,this.maxAge=30};v.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,h.fillStyle=p,h.fillRect(this.x,this.y,this.width,this.height),this.yVelocity+=.1,this.age++,!(this.age>this.maxAge)};const _=function(){this.type="snow_flake",this.width=g(10,30),this.height=this.width,this.x=g(-200,a.width+200),this.y=-30,this.xVelocity=(30-g(0,10))/60,this.yVelocity=g(.8,1.4,!1),this.opacity=g(.3,.7,!1),this.settleLength=500,this.settled=0};_.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,h.beginPath(),h.arc(this.x,this.y,this.width/2,0,2*Math.PI,!1),h.fillStyle="rgba(255, 255, 255, "+this.opacity+")",h.fill(),!(this.y>a.height&&(this.xVelocity=0,this.yVelocity=0,this.settled++,this.settled>this.settleLength))};const z=function(){this.type="blowing_leaf",this.width=g(10,20),this.height=2.24*this.width,this.xVelocity=(30-g(0,20))/6,this.yVelocity=this.xVelocity/6,this.rotation=1*Math.random(),this.rotationVelocity=g(-.06,.06,!1),this.xVelocity>0?this.x=g(-50,-100):this.x=g(a.width,a.width+100),this.gravity=g(-.06,.06,!1),this.y=g(a.height-a.height/4,a.height),this.yDirectionChangeLength=g(20,100),this.yDirectionTravelled=0};z.prototype.draw=function(){h.save(),this.x+=this.xVelocity,this.y+=this.yVelocity,this.yVelocity=this.yVelocity+this.gravity+-.01,this.yDirectionTravelled++,this.yDirectionTravelled>this.yDirectionChangeLength&&(this.yDirectionTravelled=0,this.gravity*=-1,this.yDirectionChangeLength=g(20,100)),this.rotation+=this.rotationVelocity;var e=this.width/2,t=this.height/2;if(h.translate(this.x+e,this.y+t),h.rotate(this.rotation),h.drawImage(w.leaf.image,0,0,100,224,0-e,0-t,this.width,this.height),h.restore(),this.xVelocity>0){if(this.x>a.width)return!1}else if(this.x<-50)return!1;return!0};const C=function(){this.type="lightning",this.x=g(0,a.width),this.age=0,this.life=20,this.drawFrom=0,this.drawTo=0,this.points=[[this.x,0]],this.totalPoints=0,this.opacity=.7,this.flashed=!1,this.flashOpacity=0;for(var e=0,t=0;t<a.height;){var s=this.points[this.points.length-1];e=s[0]>this.x?g(this.x,this.x+15):g(this.x+15,this.x),(t=s[1]+g(10,50))>a.height&&(t=a.height),this.totalPoints++,this.points.push([e,t])}};let T;function k(){const e=(new Date).getHours();T=e>=4&&e<6?"sunrise":e>=7&&e<15?"day":e>=16&&e<19?"sunset":"night",a&&(a.className=T)}C.prototype.draw=function(){if(this.drawTo<this.points.length?(this.drawTo=this.drawTo+2,this.drawTo>this.points.length&&(this.drawTo=this.points.length)):(this.opacity=this.opacity-.02,this.flashed||(this.flashed=!0,this.flashOpacity=1)),this.opacity<0)return!1;this.flashOpacity>0&&(h.fillStyle="rgba(255, 255, 255, "+this.flashOpacity+")",h.fillRect(0,0,a.width,a.height),this.flashOpacity=this.flashOpacity-.1),h.beginPath(),h.moveTo(this.points[this.drawFrom][0],this.points[this.drawFrom][1]);for(var e=this.drawFrom;e<this.drawTo;e++)h.lineTo(this.points[e][0],this.points[e][1]);return h.strokeStyle="rgba(255, 255, 255, "+this.opacity+")",h.lineWidth=3,h.stroke(),!0},k(),console.log(T);const V=function(){a.width=window.innerWidth,a.height=window.innerHeight};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementsByTagName("input");a=document.getElementById("canvas"),h=a.getContext("2d"),V(),k(),window.addEventListener("resize",V);for(const t=0;t<e.length;t++)"text"===e[t].type?e[t].addEventListener("keyup",updateConditions):e[t].addEventListener("change",updateConditions);(e=>{let t=0,s=0;if(l)return void(e&&e());const i=()=>{s++,s===t&&(l=!0,e&&e())};for(const e in w){const s=w[e];t++,s.image=new Image,s.image.onload=i,s.image.src="https://s3.amazonaws.com/gerwins/weather/"+s.fileName}})((function(){u()}))}));const D=s(295);D.keys().forEach((e=>D(e)));const S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F={btnRefresh:$("#icon-refresh"),cityName:$("#city-name"),countryCode:$("#country-code"),currentTemp:$("#current-temp"),currentHumi:$("#current-humi"),currentWeather:$("#current-weather"),currentWindSpeed:$("#current-windspeed"),iconCurrentWeather:$("#icon-current-weather"),localTime:$("#local-time"),hourlyForecast:$("#hourly-forecast"),dailyForecast:$("#daily-forecast"),drawer:$("#drawer-swipe"),expandedContent:$("#drawer-expanded-content"),menu:$("#menu")},O=()=>{const e=new Date;let t=e.getDate(),s=e.getDay(),i=e.getHours(),r=e.getMinutes();e.getSeconds(),i=i<10?"0"+i:i,r=r<10?"0"+r:r;let n=`${S[s]} ${t} || ${i} <span class="colon">:</span> ${r}`;F.localTime.html(n),(new Date).getSeconds()%1==0?$(".colon").addClass("blink"):$(".colon").removeClass("blink"),setTimeout(O,1e3)};$(window).on("load",(()=>{F.btnRefresh.on("click",(()=>{location.reload()})),$("#drawer-toggle").on("click",(()=>{F.drawer.toggleClass("drawer-collapsed drawer-expanded"),F.expandedContent.toggleClass("hidden"),F.menu.toggleClass("hidden")})),$("#daily-forecast").addClass("hidden"),$("#hourly-page").on("click",(()=>{F.dailyForecast.addClass("hidden"),F.hourlyForecast.removeClass("hidden")})),$("#daily-page").on("click",(()=>{F.hourlyForecast.addClass("hidden"),F.dailyForecast.removeClass("hidden")})),((s,i)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((s=>((s,i)=>{const n=`https://api.open-meteo.com/v1/forecast?latitude=${s}&longitude=${i}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FBangkok`;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${s}%2C${i}&key=250178f6b314472c95280f5f73d608e1`).then((e=>e.json())).then(e).catch(console.error),fetch(n).then((e=>e.json())).then((e=>{(e=>{const s=r(e.weather_code);0===e.weather_code||1===e.weather_code?(t.rain=!1,t.clouds=!1,t.lightning=!1,t.snow=!1,t.wind=!1):2===e.weather_code?(t.rain=!1,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!1):45===e.weather_code||48===e.weather_code?(t.rain=!1,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!0):e.weather_code>=51&&e.weather_code<=55?(t.rain=!0,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!1):e.weather_code>=61&&e.weather_code<=65||e.weather_code>=80&&e.weather_code<=82?(t.rain=!0,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!0,t.lightning=!1):e.weather_code>=71&&e.weather_code<=77||e.weather_code>=85&&e.weather_code<=86?(t.rain=!1,t.clouds=!1,t.lightning=!1,t.snow=!0,t.wind=!1):e.weather_code>=95&&e.weather_code<=99&&(thunderstorm,t.rain=!0,t.clouds=!0,t.lightning=!0,t.snow=!1,t.wind=!0),u(),F.currentWeather.text(s.weather),F.currentTemp.text(Math.round(e.temperature_2m)+"°"),F.currentHumi.text(e.relative_humidity_2m+"%"),F.currentWindSpeed.text(e.wind_speed_10m+"m/s"),F.iconCurrentWeather.attr("src",s.iconSrc)})(e.current),u(),(e=>{const t=new Date,s=t.getHours(),i=F.hourlyForecast.empty();e.hourly.time.map(((t,s)=>({time:t,temperature:e.hourly.temperature_2m[s],weatherCode:e.hourly.weather_code[s]}))).filter((({time:e})=>{const i=new Date(e),r=i.getHours();return i.toDateString()===t.toDateString()&&r>=s&&r<s+12})).forEach((({time:e,temperature:t,weatherCode:s})=>{const n=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),o=r(s).iconSrc;i.append(`\n        <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n          <img src="${o}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n          <div class="text-xs text-white relative -top-5">\n            <p class="font-bold mt-2">${n}</p>\n            <p class="my-2">${Math.round(t)}&deg;</p>\n          </div>\n        </div>\n      `)}))})(e),(e=>{const t=F.dailyForecast.empty(),s=(new Date).getDay();e.daily.time.forEach(((i,n)=>{const o=(s+n)%7,a=Math.round(e.daily.temperature_2m_max[n])+"°",h=Math.round(e.daily.temperature_2m_min[n])+"°",c=e.daily.weather_code[n],l=r(c).iconSrc;t.append(`\n        <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n          <img src="${l}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n          <div class="text-xs text-white relative -top-3">\n            <p class="font-bold">${S[o]}</p>\n            <p class="underline underline-offset-4">${a}</p>\n            <p>${h}</p>\n          </div>\n        </div>\n      `)}))})(e)})).catch(console.error)})(s.coords.latitude,s.coords.longitude)),(e=>{console.error("Error:",e.message),i&&i(e.message)}));else{const e="Geolocation is not supported by this browser.";console.error("Error:",e),i&&i(e)}})(0,(e=>{alert("Unable to retrieve your location. Please ensure location services are enabled."),console.error("Geolocation error:",e)}))})),O()})()})();
//# sourceMappingURL=main.bundle.js.map