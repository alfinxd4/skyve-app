(()=>{var e={295:(e,t,i)=>{var s={"./background/morn.webp":30,"./background/night.webp":648,"./background/noon.webp":296,"./background/starry-mountain.webp":497,"./house.webp":755,"./weather/clear/morn-clear.webp":562,"./weather/clear/night-clear.webp":804,"./weather/cloudly/evening-cloudly.webp":282,"./weather/cloudly/morn-cloudly.webp":696,"./weather/cloudly/night-cloudly.webp":384,"./weather/drizzle/evening-drizzle.webp":210,"./weather/drizzle/morn-drizzle.webp":423,"./weather/drizzle/night-drizzle.webp":932,"./weather/fog/fog.webp":627,"./weather/icon/cloud.webp":891,"./weather/icon/lighting.webp":218,"./weather/icon/rain.webp":788,"./weather/icon/snow.webp":125,"./weather/icon/star1.webp":153,"./weather/icon/star2.webp":764,"./weather/icon/sun.webp":616,"./weather/overcast/overcast.webp":907,"./weather/rain/evening-rain.webp":810,"./weather/rain/morn-rain.webp":44,"./weather/rain/night-rain.webp":356,"./weather/snow/evening-snow.webp":496,"./weather/snow/morn-snow.webp":852,"./weather/snow/night-snow.webp":658,"./weather/thunderstorm/evening-storm.webp":868,"./weather/thunderstorm/morn-storm.webp":568,"./weather/thunderstorm/night-storm.webp":974};function r(e){var t=o(e);return i(t)}function o(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=295},30:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/morn.webp"},648:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/night.webp"},296:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/noon.webp"},497:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/starry-mountain.webp"},755:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/house.webp"},562:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/clear/morn-clear.webp"},804:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/clear/night-clear.webp"},282:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/evening-cloudly.webp"},696:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/morn-cloudly.webp"},384:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/night-cloudly.webp"},210:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/evening-drizzle.webp"},423:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/morn-drizzle.webp"},932:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/night-drizzle.webp"},627:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/fog/fog.webp"},891:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/cloud.webp"},218:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/lighting.webp"},788:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/rain.webp"},125:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/snow.webp"},153:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/star1.webp"},764:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/star2.webp"},616:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/sun.webp"},907:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/overcast/overcast.webp"},810:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/evening-rain.webp"},44:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/morn-rain.webp"},356:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/night-rain.webp"},496:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/evening-snow.webp"},852:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/morn-snow.webp"},658:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/night-snow.webp"},868:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/evening-storm.webp"},568:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/morn-storm.webp"},974:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/night-storm.webp"}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=s[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"})(),(()=>{"use strict";const e=i(295);e.keys().forEach((t=>e(t)));const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s={btnRefresh:$("#icon-refresh"),cityName:$("#city-name"),countryCode:$("#country-code"),currentTemp:$("#current-temp"),currentHumi:$("#current-humi"),currentWeather:$("#current-weather"),currentWindSpeed:$("#current-windspeed"),iconCurrentWeather:$("#icon-current-weather"),localTime:$("#local-time"),hourlyForecast:$("#hourly-forecast"),dailyForecast:$("#daily-forecast"),drawer:$("#drawer-swipe"),expandedContent:$("#drawer-expanded-content"),menu:$("#menu")},r=e=>{s.cityName.text(e.results[0].components.city||e.results[0].components.county),s.countryCode.text(e.results[0].components.country_code.toUpperCase())},o=e=>{let t,i;switch(0===e||1===e?t="Clear":2===e?t="Cloudy":3===e?t="Overcast":45===e||48===e?t="Fog":e>=51&&e<=55?t="Drizzle":e>=61&&e<=65||e>=80&&e<=82?t="Rain":e>=71&&e<=75||e>=85&&e<=86?t="Snow":e>=95&&e<=99&&(t="Thunderstorm"),t){case"Clear":i="assets/images/weather/clear/night-clear.webp";break;case"Cloudy":i="assets/images/weather/cloudly/night-cloudly.webp";break;case"Overcast":i="assets/images/weather/overcast/overcast.webp";break;case"Fog":i="assets/images/weather/fog/fog.webp";break;case"Drizzle":i="assets/images/weather/cloudly/night-drizzle.webp";break;case"Rain":i="assets/images/weather/rain/night-rain.webp";break;case"Snow":i="assets/images/weather/snow/night-snow.webp";break;case"Thunderstorm":i="assets/images/weather/thunderstorm/night-storm.webp"}return{weather:t,iconSrc:i}};$(window).on("load",(()=>{$("#daily-forecast").addClass("hidden"),((e,i)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((e=>((e,i)=>{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${i}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FBangkok`;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}%2C${i}&key=250178f6b314472c95280f5f73d608e1`).then((e=>e.json())).then(r).catch(console.error),fetch(n).then((e=>e.json())).then((e=>{(e=>{const t=o(e.weather_code);console.log(t.weather),console.log(e.weather_code),0===e.weather_code||1===e.weather_code?(p.rain=!1,p.clouds=!1,p.lightning=!1,p.snow=!1,p.wind=!1):2===e.weather_code||3===e.weather_code?(p.rain=!1,p.clouds=!0,p.lightning=!1,p.snow=!1,p.wind=!1):45===e.weather_code||48===e.weather_code?(p.rain=!1,p.clouds=!1,p.lightning=!0,p.snow=!0,p.wind=!1):e.weather_code>=51&&e.weather_code<=55?(p.rain=!0,p.clouds=!0,p.lightning=!1,p.snow=!1,p.wind=!1):e.weather_code>=61&&e.weather_code<=65||e.weather_code>=80&&e.weather_code<=82?(p.rain=!0,p.clouds=!0,p.lightning=!1,p.snow=!1,p.wind=!0,p.lightning=!1):e.weather_code>=71&&e.weather_code<=77||e.weather_code>=85&&e.weather_code<=86?(p.rain=!1,p.clouds=!1,p.lightning=!1,p.snow=!0,p.wind=!1):e.weather_code>=95&&e.weather_code<=99&&(p.rain=!1,p.clouds=!1,p.lightning=!1,p.snow=!1,p.wind=!1),s.currentWeather.text(t.weather),s.currentTemp.text(Math.round(e.temperature_2m)+"°"),s.currentHumi.text(e.relative_humidity_2m+"%"),s.currentWindSpeed.text(e.wind_speed_10m+"m/s"),s.iconCurrentWeather.attr("src",t.iconSrc)})(e.current),y(),(e=>{const t=new Date,i=t.getHours(),r=s.hourlyForecast.empty();e.hourly.time.map(((t,i)=>({time:t,temperature:e.hourly.temperature_2m[i],weatherCode:e.hourly.weather_code[i]}))).filter((({time:e})=>{const s=new Date(e),r=s.getHours();return s.toDateString()===t.toDateString()&&r>=i&&r<i+12})).forEach((({time:e,temperature:t,weatherCode:i})=>{const s=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),n=o(i).iconSrc;r.append(`\n      <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n        <img src="${n}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n        <div class="text-xs text-white relative -top-5">\n          <p class="font-bold mt-2">${s}</p>\n          <p class="my-2">${Math.round(t)}&deg;</p>\n        </div>\n      </div>\n    `)}))})(e),(e=>{const i=s.dailyForecast.empty(),r=(new Date).getDay();e.daily.time.forEach(((s,n)=>{const a=(r+n)%7,h=Math.round(e.daily.temperature_2m_max[n])+"°",c=Math.round(e.daily.temperature_2m_min[n])+"°",l=e.daily.weather_code[n],w=o(l).iconSrc;i.append(`\n      <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n        <img src="${w}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n        <div class="text-xs text-white relative -top-3">\n          <p class="font-bold">${t[a]}</p>\n          <p class="underline underline-offset-4">${h}</p>\n          <p>${c}</p>\n        </div>\n      </div>\n    `)}))})(e)})).catch(console.error)})(e.coords.latitude,e.coords.longitude)),(e=>{console.error("Error:",e.message),i&&i(e.message)}));else{const e="Geolocation is not supported by this browser.";console.error("Error:",e),i&&i(e)}})(0,(e=>{alert("Unable to retrieve your location. Please ensure location services are enabled."),console.error("Geolocation error:",e)}))})),s.btnRefresh.on("click",(()=>{location.reload()})),$("#drawer-toggle").on("click",(()=>{s.drawer.toggleClass("drawer-collapsed drawer-expanded"),s.expandedContent.toggleClass("hidden"),s.menu.toggleClass("hidden")})),$("#hourly-page").on("click",(()=>{s.dailyForecast.addClass("hidden"),s.hourlyForecast.removeClass("hidden")})),$("#daily-page").on("click",(()=>{s.hourlyForecast.addClass("hidden"),s.dailyForecast.removeClass("hidden")})),(()=>{const e=new Date,i=e.getDate(),r=e.getDay(),o=e.getMonth(),n=e.getFullYear(),a=`${t[r]}, ${i} ${o+1} ${n}`;s.localTime.text(a)})();let n=!1,a=[],h=!1,c=!1,l={},w=!1,d={leaf:{fileName:"weather_leaf.png"},cloud_02:{fileName:"weather_cloud_02.png",width:1792,height:276}},p={clouds:!1,lightning:!1,rain:!1,snow:!1,wind:!1},u=!1;const g="rgba(255, 255, 255, .4)",m=function(e,t,i=!0){const s=Math.random()*(t-e)+e;return i?Math.floor(s):s},y=function(){b(),u=!1;for(let e=0,t=a.length;e<t;e++)a.splice(e,1),t--,e--;f()},f=function(){if(!n){if(p.clouds&&!u&&(a.push(new v({x:-400}),new v({x:700}),new v({x:1400})),u=!0),p.rain&&(l.rain=setInterval((()=>a.push(new _)),60)),p.snow&&(l.snow=setInterval((()=>a.push(new C)),250)),p.wind){var e=function(){for(let e=0,t=m(0,3);e<t;e++)a.push(new T);l.wind=setTimeout(e,m(500,1500))};e()}if(p.lightning){let e=function(){m(0,10)>7&&(l.secondFlash=setTimeout((function(){a.push(new k)}),200)),a.push(new k),l.lightning=setTimeout(e,m(500,7e3))};e()}x()}},b=function(){cancelAnimationFrame(n),n=!1;for(let e in l)l[e]&&clearInterval(l[e])},x=function(){c.clearRect(0,0,h.width,h.height);for(let e=0,t=a.length;e<t;e++)a[e].draw()||(a.splice(e,1),t--,e--);n=window.requestAnimationFrame(x)},v=function(e){this.type="cloud",this.img=e.img||d.cloud_02,this.width=this.img.width,this.height=this.img.height,this.xVelocity=(30-m(0,10))/60,this.x=e.x||m(-100,h.width+100),this.y=e.y||m(0-this.height/2,-60)};v.prototype.draw=function(){return this.x+=this.xVelocity,c.drawImage(this.img.image,this.x,this.y,this.img.width,this.img.height),this.x>h.width&&(this.xVelocity=(30-m(0,10))/60,this.x=0-this.width),this.x<0-this.width&&(this.xVelocity=(30-m(0,10))/60,this.x=h.width),!0};const _=function(){this.type="rain_drop",this.width=3,this.height=m(15,25),this.x=m(0,h.width),this.y=-10,this.yVelocity=8};_.prototype.draw=function(){if(this.y+=this.yVelocity,c.fillStyle=g,c.fillRect(this.x,this.y,this.width,this.height),this.y>h.height){if(Math.floor(10*Math.random())>7)for(let e=0,t=m(3,5);e<t;e++)a.push(new z(this.x));return!1}return!0};const z=function(e){this.type="splash_drop",this.width=3,this.height=3,this.x=e,this.y=h.height,this.yVelocity=m(-1,-3,!1),this.xVelocity=m(-2,2,!1),this.age=0,this.maxAge=30};z.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,c.fillStyle=g,c.fillRect(this.x,this.y,this.width,this.height),this.yVelocity+=.1,this.age++,!(this.age>this.maxAge)};const C=function(){this.type="snow_flake",this.width=m(10,30),this.height=this.width,this.x=m(-200,h.width+200),this.y=-30,this.xVelocity=(30-m(0,10))/60,this.yVelocity=m(.8,1.4,!1),this.opacity=m(.3,.7,!1),this.settleLength=500,this.settled=0};C.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,c.beginPath(),c.arc(this.x,this.y,this.width/2,0,2*Math.PI,!1),c.fillStyle="rgba(255, 255, 255, "+this.opacity+")",c.fill(),!(this.y>h.height&&(this.xVelocity=0,this.yVelocity=0,this.settled++,this.settled>this.settleLength))};const T=function(){this.type="blowing_leaf",this.width=m(10,20),this.height=2.24*this.width,this.xVelocity=(30-m(0,20))/6,this.yVelocity=this.xVelocity/6,this.rotation=1*Math.random(),this.rotationVelocity=m(-.06,.06,!1),this.xVelocity>0?this.x=m(-50,-100):this.x=m(h.width,h.width+100),this.gravity=m(-.06,.06,!1),this.y=m(h.height-h.height/4,h.height),this.yDirectionChangeLength=m(20,100),this.yDirectionTravelled=0};T.prototype.draw=function(){c.save(),this.x+=this.xVelocity,this.y+=this.yVelocity,this.yVelocity=this.yVelocity+this.gravity+-.01,this.yDirectionTravelled++,this.yDirectionTravelled>this.yDirectionChangeLength&&(this.yDirectionTravelled=0,this.gravity*=-1,this.yDirectionChangeLength=m(20,100)),this.rotation+=this.rotationVelocity;var e=this.width/2,t=this.height/2;if(c.translate(this.x+e,this.y+t),c.rotate(this.rotation),c.drawImage(d.leaf.image,0,0,100,224,0-e,0-t,this.width,this.height),c.restore(),this.xVelocity>0){if(this.x>h.width)return!1}else if(this.x<-50)return!1;return!0};const k=function(){this.type="lightning",this.x=m(0,h.width),this.age=0,this.life=20,this.drawFrom=0,this.drawTo=0,this.points=[[this.x,0]],this.totalPoints=0,this.opacity=.7,this.flashed=!1,this.flashOpacity=0;for(var e=0,t=0;t<h.height;){var i=this.points[this.points.length-1];e=i[0]>this.x?m(this.x,this.x+15):m(this.x+15,this.x),(t=i[1]+m(10,50))>h.height&&(t=h.height),this.totalPoints++,this.points.push([e,t])}};let V;function D(){const e=(new Date).getHours();V=e>=4&&e<6?"sunrise":e>=7&&e<15?"day":e>=16&&e<19?"sunset":"night",h&&(h.className=V)}k.prototype.draw=function(){if(this.drawTo<this.points.length?(this.drawTo=this.drawTo+2,this.drawTo>this.points.length&&(this.drawTo=this.points.length)):(this.opacity=this.opacity-.02,this.flashed||(this.flashed=!0,this.flashOpacity=1)),this.opacity<0)return!1;this.flashOpacity>0&&(c.fillStyle="rgba(255, 255, 255, "+this.flashOpacity+")",c.fillRect(0,0,h.width,h.height),this.flashOpacity=this.flashOpacity-.1),c.beginPath(),c.moveTo(this.points[this.drawFrom][0],this.points[this.drawFrom][1]);for(var e=this.drawFrom;e<this.drawTo;e++)c.lineTo(this.points[e][0],this.points[e][1]);return c.strokeStyle="rgba(255, 255, 255, "+this.opacity+")",c.lineWidth=3,c.stroke(),!0},D(),console.log(V);const S=function(){h.width=window.innerWidth,h.height=window.innerHeight};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementsByTagName("input");h=document.getElementById("canvas"),c=h.getContext("2d"),S(),D(),window.addEventListener("resize",S);for(const t=0;t<e.length;t++)"text"===e[t].type?e[t].addEventListener("keyup",updateConditions):e[t].addEventListener("change",updateConditions);!function(e){let t=0,i=0;if(w)return void(e&&e());const s=function(){i++,i===t&&(w=!0,e&&e())};for(const e in d){const i=d[e];t++,i.image=new Image,i.image.onload=s,i.image.src="https://s3.amazonaws.com/gerwins/weather/"+i.fileName}}((function(){y()}))}))})()})();
//# sourceMappingURL=main.bundle.js.map