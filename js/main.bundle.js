(()=>{var e={295:(e,t,i)=>{var s={"./background/morn.webp":30,"./background/night.webp":648,"./background/noon.webp":296,"./background/starry-mountain.webp":497,"./house.webp":755,"./weather/clear/morn-clear.webp":562,"./weather/clear/night-clear.webp":804,"./weather/cloudly/evening-cloudly.webp":282,"./weather/cloudly/morn-cloudly.webp":696,"./weather/cloudly/night-cloudly.webp":384,"./weather/drizzle/evening-drizzle.webp":210,"./weather/drizzle/morn-drizzle.webp":423,"./weather/drizzle/night-drizzle.webp":932,"./weather/fog/fog.webp":627,"./weather/icon/cloud.webp":891,"./weather/icon/lighting.webp":218,"./weather/icon/rain.webp":788,"./weather/icon/snow.webp":125,"./weather/icon/star1.webp":153,"./weather/icon/star2.webp":764,"./weather/icon/sun.webp":616,"./weather/overcast/overcast.webp":907,"./weather/rain/evening-rain.webp":810,"./weather/rain/morn-rain.webp":44,"./weather/rain/night-rain.webp":356,"./weather/snow/evening-snow.webp":496,"./weather/snow/morn-snow.webp":852,"./weather/snow/night-snow.webp":658,"./weather/thunderstorm/evening-storm.webp":868,"./weather/thunderstorm/morn-storm.webp":568,"./weather/thunderstorm/night-storm.webp":974};function r(e){var t=o(e);return i(t)}function o(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=295},30:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/morn.webp"},648:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/night.webp"},296:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/noon.webp"},497:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/background/starry-mountain.webp"},755:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/house.webp"},562:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/clear/morn-clear.webp"},804:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/clear/night-clear.webp"},282:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/evening-cloudly.webp"},696:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/morn-cloudly.webp"},384:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/cloudly/night-cloudly.webp"},210:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/evening-drizzle.webp"},423:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/morn-drizzle.webp"},932:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/drizzle/night-drizzle.webp"},627:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/fog/fog.webp"},891:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/cloud.webp"},218:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/lighting.webp"},788:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/rain.webp"},125:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/snow.webp"},153:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/star1.webp"},764:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/star2.webp"},616:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/icon/sun.webp"},907:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/overcast/overcast.webp"},810:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/evening-rain.webp"},44:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/morn-rain.webp"},356:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/rain/night-rain.webp"},496:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/evening-snow.webp"},852:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/morn-snow.webp"},658:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/snow/night-snow.webp"},868:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/evening-storm.webp"},568:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/morn-storm.webp"},974:(e,t,i)=>{"use strict";e.exports=i.p+"assets/images/weather/thunderstorm/night-storm.webp"}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=s[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"})();var s={};(()=>{"use strict";i.d(s,{BP:()=>S,Tp:()=>F});const e=e=>{F.cityName.text(e.results[0].components.city||e.results[0].components.county),F.countryCode.text(e.results[0].components.country_code.toUpperCase())};let t={clouds:!1,lightning:!1,rain:!1,snow:!1,wind:!1};const r=e=>{let t,i;switch(0===e||1===e?t="Clear":2===e?t="Cloudy":3===e?t="Overcast":45===e||48===e?t="Fog":e>=51&&e<=55?t="Drizzle":e>=61&&e<=65||e>=80&&e<=82?t="Rain":e>=71&&e<=75||e>=85&&e<=86?t="Snow":e>=95&&e<=99&&(t="Thunderstorm"),t){case"Clear":i="assets/images/weather/clear/night-clear.webp";break;case"Cloudy":i="assets/images/weather/cloudly/night-cloudly.webp";break;case"Overcast":i="assets/images/weather/overcast/overcast.webp";break;case"Fog":i="assets/images/weather/fog/fog.webp";break;case"Drizzle":i="assets/images/weather/drizzle/night-drizzle.webp";break;case"Rain":i="assets/images/weather/rain/night-rain.webp";break;case"Snow":i="assets/images/weather/snow/night-snow.webp";break;case"Thunderstorm":i="assets/images/weather/thunderstorm/night-storm.webp"}return{weather:t,iconSrc:i}};let o=!1,n=[],a=!1,h=!1,c={},l=!1,w={leaf:{fileName:"weather_leaf.png"},cloud_02:{fileName:"weather_cloud_02.png",width:1792,height:276}},d=!1;const p="rgba(255, 255, 255, .4)",u=function(e,t,i=!0){const s=Math.random()*(t-e)+e;return i?Math.floor(s):s},g=function(){y(),d=!1;for(let e=0,t=n.length;e<t;e++)n.splice(e,1),t--,e--;m()},m=function(){if(!o){if(t.clouds&&!d&&(n.push(new b({x:-400}),new b({x:700}),new b({x:1400})),d=!0),t.rain&&(c.rain=setInterval((()=>n.push(new x)),60)),t.snow&&(c.snow=setInterval((()=>n.push(new _)),250)),t.wind){var e=function(){for(let e=0,t=u(0,3);e<t;e++)n.push(new z);c.wind=setTimeout(e,u(500,1500))};e()}if(t.lightning){let e=function(){u(0,10)>7&&(c.secondFlash=setTimeout((function(){n.push(new C)}),200)),n.push(new C),c.lightning=setTimeout(e,u(500,7e3))};e()}f()}},y=function(){cancelAnimationFrame(o),o=!1;for(let e in c)c[e]&&clearInterval(c[e])},f=function(){h.clearRect(0,0,a.width,a.height);for(let e=0,t=n.length;e<t;e++)n[e].draw()||(n.splice(e,1),t--,e--);o=window.requestAnimationFrame(f)},b=function(e){this.type="cloud",this.img=e.img||w.cloud_02,this.width=this.img.width,this.height=this.img.height,this.xVelocity=(30-u(0,10))/60,this.x=e.x||u(-100,a.width+100),this.y=e.y||u(0-this.height/2,-60)};b.prototype.draw=function(){return this.x+=this.xVelocity,h.drawImage(this.img.image,this.x,this.y,this.img.width,this.img.height),this.x>a.width&&(this.xVelocity=(30-u(0,10))/60,this.x=0-this.width),this.x<0-this.width&&(this.xVelocity=(30-u(0,10))/60,this.x=a.width),!0};const x=function(){this.type="rain_drop",this.width=3,this.height=u(15,25),this.x=u(0,a.width),this.y=-10,this.yVelocity=8};x.prototype.draw=function(){if(this.y+=this.yVelocity,h.fillStyle=p,h.fillRect(this.x,this.y,this.width,this.height),this.y>a.height){if(Math.floor(10*Math.random())>7)for(let e=0,t=u(3,5);e<t;e++)n.push(new v(this.x));return!1}return!0};const v=function(e){this.type="splash_drop",this.width=3,this.height=3,this.x=e,this.y=a.height,this.yVelocity=u(-1,-3,!1),this.xVelocity=u(-2,2,!1),this.age=0,this.maxAge=30};v.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,h.fillStyle=p,h.fillRect(this.x,this.y,this.width,this.height),this.yVelocity+=.1,this.age++,!(this.age>this.maxAge)};const _=function(){this.type="snow_flake",this.width=u(10,30),this.height=this.width,this.x=u(-200,a.width+200),this.y=-30,this.xVelocity=(30-u(0,10))/60,this.yVelocity=u(.8,1.4,!1),this.opacity=u(.3,.7,!1),this.settleLength=500,this.settled=0};_.prototype.draw=function(){return this.y+=this.yVelocity,this.x+=this.xVelocity,h.beginPath(),h.arc(this.x,this.y,this.width/2,0,2*Math.PI,!1),h.fillStyle="rgba(255, 255, 255, "+this.opacity+")",h.fill(),!(this.y>a.height&&(this.xVelocity=0,this.yVelocity=0,this.settled++,this.settled>this.settleLength))};const z=function(){this.type="blowing_leaf",this.width=u(10,20),this.height=2.24*this.width,this.xVelocity=(30-u(0,20))/6,this.yVelocity=this.xVelocity/6,this.rotation=1*Math.random(),this.rotationVelocity=u(-.06,.06,!1),this.xVelocity>0?this.x=u(-50,-100):this.x=u(a.width,a.width+100),this.gravity=u(-.06,.06,!1),this.y=u(a.height-a.height/4,a.height),this.yDirectionChangeLength=u(20,100),this.yDirectionTravelled=0};z.prototype.draw=function(){h.save(),this.x+=this.xVelocity,this.y+=this.yVelocity,this.yVelocity=this.yVelocity+this.gravity+-.01,this.yDirectionTravelled++,this.yDirectionTravelled>this.yDirectionChangeLength&&(this.yDirectionTravelled=0,this.gravity*=-1,this.yDirectionChangeLength=u(20,100)),this.rotation+=this.rotationVelocity;var e=this.width/2,t=this.height/2;if(h.translate(this.x+e,this.y+t),h.rotate(this.rotation),h.drawImage(w.leaf.image,0,0,100,224,0-e,0-t,this.width,this.height),h.restore(),this.xVelocity>0){if(this.x>a.width)return!1}else if(this.x<-50)return!1;return!0};const C=function(){this.type="lightning",this.x=u(0,a.width),this.age=0,this.life=20,this.drawFrom=0,this.drawTo=0,this.points=[[this.x,0]],this.totalPoints=0,this.opacity=.7,this.flashed=!1,this.flashOpacity=0;for(var e=0,t=0;t<a.height;){var i=this.points[this.points.length-1];e=i[0]>this.x?u(this.x,this.x+15):u(this.x+15,this.x),(t=i[1]+u(10,50))>a.height&&(t=a.height),this.totalPoints++,this.points.push([e,t])}};let T;function k(){const e=(new Date).getHours();T=e>=4&&e<6?"sunrise":e>=7&&e<15?"day":e>=16&&e<19?"sunset":"night",a&&(a.className=T)}C.prototype.draw=function(){if(this.drawTo<this.points.length?(this.drawTo=this.drawTo+2,this.drawTo>this.points.length&&(this.drawTo=this.points.length)):(this.opacity=this.opacity-.02,this.flashed||(this.flashed=!0,this.flashOpacity=1)),this.opacity<0)return!1;this.flashOpacity>0&&(h.fillStyle="rgba(255, 255, 255, "+this.flashOpacity+")",h.fillRect(0,0,a.width,a.height),this.flashOpacity=this.flashOpacity-.1),h.beginPath(),h.moveTo(this.points[this.drawFrom][0],this.points[this.drawFrom][1]);for(var e=this.drawFrom;e<this.drawTo;e++)h.lineTo(this.points[e][0],this.points[e][1]);return h.strokeStyle="rgba(255, 255, 255, "+this.opacity+")",h.lineWidth=3,h.stroke(),!0},k(),console.log(T);const V=function(){a.width=window.innerWidth,a.height=window.innerHeight};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementsByTagName("input");a=document.getElementById("canvas"),h=a.getContext("2d"),V(),k(),window.addEventListener("resize",V);for(const t=0;t<e.length;t++)"text"===e[t].type?e[t].addEventListener("keyup",updateConditions):e[t].addEventListener("change",updateConditions);!function(e){let t=0,i=0;if(l)return void(e&&e());const s=function(){i++,i===t&&(l=!0,e&&e())};for(const e in w){const i=w[e];t++,i.image=new Image,i.image.onload=s,i.image.src="https://s3.amazonaws.com/gerwins/weather/"+i.fileName}}((function(){g()}))}));const D=i(295);D.keys().forEach((e=>D(e)));const S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F={btnRefresh:$("#icon-refresh"),cityName:$("#city-name"),countryCode:$("#country-code"),currentTemp:$("#current-temp"),currentHumi:$("#current-humi"),currentWeather:$("#current-weather"),currentWindSpeed:$("#current-windspeed"),iconCurrentWeather:$("#icon-current-weather"),localTime:$("#local-time"),hourlyForecast:$("#hourly-forecast"),dailyForecast:$("#daily-forecast"),drawer:$("#drawer-swipe"),expandedContent:$("#drawer-expanded-content"),menu:$("#menu")};$(window).on("load",(()=>{F.btnRefresh.on("click",(()=>{location.reload()})),$("#drawer-toggle").on("click",(()=>{F.drawer.toggleClass("drawer-collapsed drawer-expanded"),F.expandedContent.toggleClass("hidden"),F.menu.toggleClass("hidden")})),$("#hourly-page").on("click",(()=>{F.dailyForecast.addClass("hidden"),F.hourlyForecast.removeClass("hidden")})),$("#daily-page").on("click",(()=>{F.hourlyForecast.addClass("hidden"),F.dailyForecast.removeClass("hidden")})),$("#daily-forecast").addClass("hidden"),((i,s)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((i=>((i,s)=>{const o=`https://api.open-meteo.com/v1/forecast?latitude=${i}&longitude=${s}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FBangkok`;fetch(`https://api.opencagedata.com/geocode/v1/json?q=${i}%2C${s}&key=250178f6b314472c95280f5f73d608e1`).then((e=>e.json())).then(e).catch(console.error),fetch(o).then((e=>e.json())).then((e=>{(e=>{const i=r(e.weather_code);0===e.weather_code||1===e.weather_code?(t.rain=!1,t.clouds=!1,t.lightning=!1,t.snow=!1,t.wind=!1):2===e.weather_code||3===e.weather_code?(t.rain=!1,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!1):45===e.weather_code||48===e.weather_code?(t.rain=!1,t.clouds=!1,t.lightning=!0,t.snow=!0,t.wind=!1):e.weather_code>=51&&e.weather_code<=55?(t.rain=!0,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!1):e.weather_code>=61&&e.weather_code<=65||e.weather_code>=80&&e.weather_code<=82?(t.rain=!0,t.clouds=!0,t.lightning=!1,t.snow=!1,t.wind=!0,t.lightning=!1):e.weather_code>=71&&e.weather_code<=77||e.weather_code>=85&&e.weather_code<=86?(t.rain=!1,t.clouds=!1,t.lightning=!1,t.snow=!0,t.wind=!1):e.weather_code>=95&&e.weather_code<=99&&(thunderstorm,t.rain=!0,t.clouds=!0,t.lightning=!0,t.snow=!1,t.wind=!0),F.currentWeather.text(i.weather),F.currentTemp.text(Math.round(e.temperature_2m)+"°"),F.currentHumi.text(e.relative_humidity_2m+"%"),F.currentWindSpeed.text(e.wind_speed_10m+"m/s"),F.iconCurrentWeather.attr("src",i.iconSrc)})(e.current),g(),(e=>{const t=new Date,i=t.getHours(),s=F.hourlyForecast.empty();e.hourly.time.map(((t,i)=>({time:t,temperature:e.hourly.temperature_2m[i],weatherCode:e.hourly.weather_code[i]}))).filter((({time:e})=>{const s=new Date(e),r=s.getHours();return s.toDateString()===t.toDateString()&&r>=i&&r<i+12})).forEach((({time:e,temperature:t,weatherCode:i})=>{const o=new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),n=r(i).iconSrc;s.append(`\n        <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n          <img src="${n}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n          <div class="text-xs text-white relative -top-5">\n            <p class="font-bold mt-2">${o}</p>\n            <p class="my-2">${Math.round(t)}&deg;</p>\n          </div>\n        </div>\n      `)}))})(e),(e=>{const t=F.dailyForecast.empty(),i=(new Date).getDay();e.daily.time.forEach(((s,o)=>{const n=(i+o)%7,a=Math.round(e.daily.temperature_2m_max[o])+"°",h=Math.round(e.daily.temperature_2m_min[o])+"°",c=e.daily.weather_code[o],l=r(c).iconSrc;t.append(`\n        <div class="bg-[#48319D]/80 w-12 h-[110px] rounded-full shadow-2xl mx-auto text-center">\n          <img src="${l}" alt="icon_weather" class="w-14 h-14 object-contain relative -top-5">\n          <div class="text-xs text-white relative -top-3">\n            <p class="font-bold">${S[n]}</p>\n            <p class="underline underline-offset-4">${a}</p>\n            <p>${h}</p>\n          </div>\n        </div>\n      `)}))})(e)})).catch(console.error)})(i.coords.latitude,i.coords.longitude)),(e=>{console.error("Error:",e.message),s&&s(e.message)}));else{const e="Geolocation is not supported by this browser.";console.error("Error:",e),s&&s(e)}})(0,(e=>{alert("Unable to retrieve your location. Please ensure location services are enabled."),console.error("Geolocation error:",e)}))})),(()=>{const e=new Date,t=e.getDate(),i=e.getDay(),s=e.getMonth(),r=e.getFullYear(),o=`${S[i]}, ${t} ${s+1} ${r}`;F.localTime.text(o)})()})()})();
//# sourceMappingURL=main.bundle.js.map